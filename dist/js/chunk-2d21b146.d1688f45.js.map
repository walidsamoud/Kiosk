{"version":3,"sources":["webpack:///./src/views/kiosk/Login.vue?41cc","webpack:///src/views/kiosk/Login.vue","webpack:///./src/views/kiosk/Login.vue?0e24","webpack:///./src/views/kiosk/Login.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticRenderFns","name","data","methods","checkForm","errors","push","$t","e","preventDefault","validEmail","re","submit","handleSubmit","computed","inputValid","created","mounted","components","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAC/FE,EAAkB,G,oCCStB,GACEC,KAAM,QACNC,KAAF,kBACA,YACA,OACA,UACA,iBACA,YAEEC,QAAF,+BACIC,UAAJ,YAUM,GATAT,KAAKU,OAAS,GACpB,UAEA,YAGQ,KAAR,eAJQV,KAAKU,OAAOC,KAAKX,KAAKY,GAAG,kBAAmB,CAApD,mCAOA,4BACMC,EAAEC,kBAIJC,WAAJ,YACM,IAAIC,EAAK,2JACf,kBAGIC,OArBJ,WAsBA,0BACQjB,KAAKkB,eAEL,KAAR,sCAAU,MAAV,2BAGA,wDA5BA,IA6BIA,aA7BJ,WA8BM,KAAN,iBACM,KAAN,aACM,IAAN,yBACA,OACQ,KAAR,aACU,UAAV,aACU,MAAV,KAEQ,KAAR,OAAU,IAAV,EAAU,OAAV,sBACU,KAAV,yCACU,KAAV,kBACA,8BACU,QAAV,QACA,+BACU,KAAV,mDACA,gBAIEC,SAAU,OAAZ,OAAY,CAAZ,iCACA,oCACA,gBACI,WAAJ,YAAM,OAAN,kBAHA,IAKIC,WALJ,WAMM,QAAN,+CAOEC,QAvEF,WA0EA,gDAGEC,QA7EF,WA8EA,mDACM,QAAN,KAAQ,IAAR,uBAAQ,MAAR,2BACM,KAAN,aAAQ,UAAR,aAAQ,MAAR,KACM,KAAN,WAAQ,IAAR,uBAAQ,MAAR,6CACQ,KAAR,yCACQ,KAAR,kBACA,8BACQ,QAAR,QACA,+BACQ,KAAR,mDACA,cAGEC,WAAF,ICrG8V,I,YCO1VC,EAAY,eACd,EACA1B,EACAO,GACA,EACA,KACA,KACA,MAIa,aAAAmB,E","file":"js/chunk-2d21b146.d1688f45.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div')}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n   \r\n<div>\r\n\r\n</div>\r\n  \r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions } from 'vuex'\r\nexport default {\r\n  name: 'Login',\r\n  data:()=>({\r\n    msg: \"Login\",\r\n    key:'',\r\n    secret:'',\r\n    requestFailed: false,\r\n    errors:[],\r\n  }),\r\n  methods:{\r\n    checkForm:function(e) {\r\n      this.errors = [];\r\n      if(!this.key) {\r\n        this.errors.push(this.$t('Errors.Required', {field: this.$t('Kiosk.App.Key')}));\r\n      } else if(!this.secret)\r\n          this.errors.push(this.$t('Errors.Required', {field: this.$t('Kiosk.App.Key')}));\r\n      else {\r\n          this.handleSubmit();\r\n        //this.$router.push('/dashboards/classic-dashboard');\r\n      }\r\n      if(!this.errors.length) return true;\r\n      e.preventDefault();\r\n      \r\n    },\r\n    /* eslint-disable */\r\n    validEmail:function(email) {\r\n      var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,24}))$/;\r\n    return re.test(email);\r\n    },\r\n    /* eslint-disable */\r\n    submit(){\r\n      if(this.validEmail(this.key)){\r\n        this.handleSubmit();\r\n      }else {\r\n          this.errors.push(this.$t('Errors.Invalid', {field: this.$t('Auth.Email')}));\r\n      }\r\n    },\r\n    ...mapActions('Kiosk', ['login', 'autoLogin', 'logout']),\r\n    handleSubmit () {\r\n        this.requestFailed = false;\r\n        this.submitted = true;\r\n        const { key, secret } = this;\r\n        if (key && secret) {\r\n            this.$vs.loading({\r\n                container: '#login-box',\r\n                scale: 0.6\r\n            });\r\n            this.login({ key, secret }).catch(function (data) {\r\n                this.errors.push(this.$t('Errors.LoginFail'));\r\n                this.requestFailed = true;\r\n            }.bind(this)).catch(function (ex) {\r\n                console.log(ex);\r\n            }.bind(this)).finally(function () {\r\n                this.$vs.loading.close('#login-box > .con-vs-loading');\r\n            }.bind(this));\r\n        }\r\n    }\r\n  },  \r\n  computed: {\r\n    ...mapState('Kiosk', ['status']),\r\n      ...mapState({\r\n          kiosk_info: state => state.Kiosk.kiosk\r\n      }),\r\n    inputValid(){\r\n      if(this.key && this.secret && !this.requestFailed){\r\n        return false\r\n      } else {\r\n        return true\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n\r\n    // reset login status\r\n    if(this.kiosk_info) this.$router.push('/checkin');\r\n    //this.logout();\r\n  },\r\n  mounted(){\r\n      if(this.$route.params.key && this.$route.params.token){\r\n          console.log({ key: this.$route.params.key, token: this.$route.params.token })\r\n          this.$vs.loading({ container: '#login-box', scale: 0.6 });\r\n          this.autoLogin({ key: this.$route.params.key, token: this.$route.params.token }).catch(function (data) {\r\n              this.errors.push(this.$t('Errors.LoginFail'));\r\n              this.requestFailed = true;\r\n          }.bind(this)).catch(function (ex) {\r\n              console.log(ex);\r\n          }.bind(this)).finally(function () {\r\n              this.$vs.loading.close('#login-box > .con-vs-loading');\r\n          }.bind(this));\r\n      }\r\n  },\r\n  components:{\r\n  }\r\n}\r\n</script>\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=5e4c1c9e&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}